<!DOCTYPE html>
<html>

<head>
    <title>Standalone NLP Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .test-result {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
        }

        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        button {
            padding: 10px 20px;
            margin: 10px 5px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <h1>üß™ Standalone NLP Processor Test</h1>

    <div id="loading" class="test-result warning">
        üîÑ Loading NLP processor...
    </div>

    <div id="status"></div>

    <div style="margin: 20px 0;">
        <h3>Test Texts:</h3>
        <button onclick="testText1()">Test Fake News Text</button>
        <button onclick="testText2()">Test Normal Text</button>
        <button onclick="testText3()">Test Bias Detection</button>
    </div>

    <div id="results"></div>

    <!-- Load the NLP processor directly -->
    <script src="nlp-processor.js"></script>

    <script>
        let nlpProcessor = null;

        // Check if NLP processor loaded
        function checkNLPProcessor() {
            console.log('Checking NLP processor...');
            console.log('window.AdvancedNLPProcessor:', typeof window.AdvancedNLPProcessor);

            const loadingDiv = document.getElementById('loading');
            const statusDiv = document.getElementById('status');

            if (typeof window.AdvancedNLPProcessor !== 'undefined') {
                try {
                    nlpProcessor = new window.AdvancedNLPProcessor();
                    loadingDiv.style.display = 'none';
                    statusDiv.innerHTML = '<div class="test-result success">‚úÖ NLP Processor loaded successfully!</div>';
                    console.log('‚úÖ NLP processor initialized');
                } catch (error) {
                    loadingDiv.style.display = 'none';
                    statusDiv.innerHTML = `<div class="test-result error">‚ùå Error initializing NLP processor: ${error.message}</div>`;
                    console.error('‚ùå Error:', error);
                }
            } else {
                loadingDiv.style.display = 'none';
                statusDiv.innerHTML = '<div class="test-result error">‚ùå AdvancedNLPProcessor class not found!</div>';
                console.error('‚ùå AdvancedNLPProcessor not found');
            }
        }

        function testText1() {
            if (!nlpProcessor) {
                alert('NLP processor not available');
                return;
            }

            const text = "SHOCKING! You won't believe what doctors don't want you to know about this AMAZING miracle cure that Big Pharma is hiding from you!";
            const result = nlpProcessor.detectFakeNews(text);

            displayResult('Fake News Detection', text, result, 'fakeNews');
        }

        function testText2() {
            if (!nlpProcessor) {
                alert('NLP processor not available');
                return;
            }

            const text = "According to a peer-reviewed study published in the Journal of Medicine, researchers have found evidence suggesting that regular exercise may help improve cardiovascular health.";
            const result = nlpProcessor.detectFakeNews(text);

            displayResult('Normal Text Analysis', text, result, 'fakeNews');
        }

        function testText3() {
            if (!nlpProcessor) {
                alert('NLP processor not available');
                return;
            }

            const text = "This is absolutely the most outrageous and disgusting thing that all politicians have ever done!";
            const result = nlpProcessor.detectBias(text);

            displayResult('Bias Detection', text, result, 'bias');
        }

        function displayResult(testName, text, result, type) {
            const resultsDiv = document.getElementById('results');

            let content = `
                <div class="test-result success">
                    <h3>üìä ${testName} Results</h3>
                    <p><strong>Text:</strong> "${text.substring(0, 100)}${text.length > 100 ? '...' : ''}"</p>
            `;

            if (type === 'fakeNews') {
                const riskColor = result.riskLevel === 'high' ? '#e74c3c' :
                    result.riskLevel === 'medium' ? '#f39c12' :
                        result.riskLevel === 'low-medium' ? '#f1c40f' : '#27ae60';

                content += `
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0;">
                        <div style="text-align: center;">
                            <div style="font-weight: bold; color: ${riskColor};">${result.riskLevel.toUpperCase()}</div>
                            <div style="font-size: 12px;">Risk Level</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">${result.suspicionScore}/20</div>
                            <div style="font-size: 12px;">Suspicion Score</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">${Math.round(result.confidence * 100)}%</div>
                            <div style="font-size: 12px;">Confidence</div>
                        </div>
                    </div>
                    <p><strong>üí° Recommendation:</strong> ${result.recommendation}</p>
                `;

                if (result.indicators.length > 0) {
                    content += `
                        <p><strong>‚ö†Ô∏è Issues Detected:</strong></p>
                        <ul>
                            ${result.indicators.map(indicator => `<li>${indicator}</li>`).join('')}
                        </ul>
                    `;
                }
            } else if (type === 'bias') {
                content += `
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0;">
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">${result.severity.toUpperCase()}</div>
                            <div style="font-size: 12px;">Bias Severity</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">${result.biasScore}</div>
                            <div style="font-size: 12px;">Bias Score</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">${Math.round(result.confidence * 100)}%</div>
                            <div style="font-size: 12px;">Confidence</div>
                        </div>
                    </div>
                `;

                if (result.biasTypes.length > 0) {
                    content += `
                        <p><strong>üéØ Bias Types:</strong> ${result.biasTypes.join(', ')}</p>
                    `;
                }
            }

            content += '</div>';
            resultsDiv.innerHTML = content;
        }

        // Check when page loads
        window.addEventListener('load', () => {
            console.log('Page loaded, checking NLP processor...');
            setTimeout(checkNLPProcessor, 100);
        });

        // Also check immediately
        setTimeout(checkNLPProcessor, 100);
    </script>
</body>

</html>