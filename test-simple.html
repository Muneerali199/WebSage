<!DOCTYPE html>
<html>
<head>
    <title>Test Simple NLP Processor</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .result { margin: 20px 0; padding: 15px; border-radius: 8px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; }
        button { padding: 10px 20px; margin: 10px 5px; cursor: pointer; }
        .test-text { background: #f8f9fa; padding: 10px; border-radius: 4px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>üß™ Simple NLP Processor Test</h1>
    
    <div id="status">Loading...</div>
    
    <div>
        <h2>Test Samples:</h2>
        <button onclick="testFakeNews1()">Test High Risk Text</button>
        <button onclick="testFakeNews2()">Test Low Risk Text</button>
        <button onclick="testBias()">Test Bias Detection</button>
    </div>
    
    <div id="results"></div>

    <script src="nlp-simple.js"></script>
    <script>
        let nlp = null;
        
        function checkNLP() {
            const statusDiv = document.getElementById('status');
            
            if (typeof AdvancedNLPProcessor !== 'undefined') {
                try {
                    nlp = new AdvancedNLPProcessor();
                    statusDiv.innerHTML = '<div class="result success">‚úÖ NLP Processor loaded successfully!</div>';
                    console.log('‚úÖ NLP processor ready');
                } catch (error) {
                    statusDiv.innerHTML = `<div class="result error">‚ùå Error creating NLP processor: ${error.message}</div>`;
                    console.error('‚ùå Error:', error);
                }
            } else {
                statusDiv.innerHTML = '<div class="result error">‚ùå AdvancedNLPProcessor not found!</div>';
                console.error('‚ùå AdvancedNLPProcessor not available');
            }
        }
        
        function testFakeNews1() {
            if (!nlp) {
                alert('NLP processor not available');
                return;
            }
            
            const text = "SHOCKING! You won't believe what doctors don't want you to know about this AMAZING miracle cure!";
            const result = nlp.detectFakeNews(text);
            
            displayResult('High Risk Fake News Test', text, result, 'fakeNews');
        }
        
        function testFakeNews2() {
            if (!nlp) {
                alert('NLP processor not available');
                return;
            }
            
            const text = "According to a recent study, researchers have found evidence suggesting potential benefits.";
            const result = nlp.detectFakeNews(text);
            
            displayResult('Low Risk Text Test', text, result, 'fakeNews');
        }
        
        function testBias() {
            if (!nlp) {
                alert('NLP processor not available');
                return;
            }
            
            const text = "This is absolutely the most outrageous thing that all politicians have ever done!";
            const result = nlp.detectBias(text);
            
            displayResult('Bias Detection Test', text, result, 'bias');
        }
        
        function displayResult(testName, text, result, type) {
            const resultsDiv = document.getElementById('results');
            
            let content = `
                <div class="result success">
                    <h3>üìä ${testName}</h3>
                    <p><strong>Text:</strong> "${text}"</p>
            `;
            
            if (type === 'fakeNews') {
                const riskColor = result.riskLevel === 'high' ? '#e74c3c' : 
                                 result.riskLevel === 'medium' ? '#f39c12' : '#27ae60';
                
                content += `
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
                        <div style="text-align: center; padding: 10px; background: white; border-radius: 8px;">
                            <div style="font-weight: bold; color: ${riskColor}; font-size: 18px;">${result.riskLevel.toUpperCase()}</div>
                            <div style="font-size: 12px;">Risk Level</div>
                        </div>
                        <div style="text-align: center; padding: 10px; background: white; border-radius: 8px;">
                            <div style="font-weight: bold; font-size: 18px;">${result.suspicionScore}/20</div>
                            <div style="font-size: 12px;">Suspicion Score</div>
                        </div>
                        <div style="text-align: center; padding: 10px; background: white; border-radius: 8px;">
                            <div style="font-weight: bold; font-size: 18px;">${Math.round(result.confidence * 100)}%</div>
                            <div style="font-size: 12px;">Confidence</div>
                        </div>
                    </div>
                    <p><strong>üí° Recommendation:</strong> ${result.recommendation}</p>
                `;
                
                if (result.indicators.length > 0) {
                    content += `
                        <p><strong>‚ö†Ô∏è Issues Detected:</strong></p>
                        <ul>
                            ${result.indicators.map(indicator => `<li>${indicator}</li>`).join('')}
                        </ul>
                    `;
                }
            } else if (type === 'bias') {
                content += `
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
                        <div style="text-align: center; padding: 10px; background: white; border-radius: 8px;">
                            <div style="font-weight: bold; font-size: 18px;">${result.severity.toUpperCase()}</div>
                            <div style="font-size: 12px;">Bias Severity</div>
                        </div>
                        <div style="text-align: center; padding: 10px; background: white; border-radius: 8px;">
                            <div style="font-weight: bold; font-size: 18px;">${result.biasScore}</div>
                            <div style="font-size: 12px;">Bias Score</div>
                        </div>
                        <div style="text-align: center; padding: 10px; background: white; border-radius: 8px;">
                            <div style="font-weight: bold; font-size: 18px;">${Math.round(result.confidence * 100)}%</div>
                            <div style="font-size: 12px;">Confidence</div>
                        </div>
                    </div>
                `;
                
                if (result.biasTypes.length > 0) {
                    content += `<p><strong>üéØ Bias Types:</strong> ${result.biasTypes.join(', ')}</p>`;
                }
            }
            
            content += '</div>';
            resultsDiv.innerHTML = content;
        }
        
        // Check when page loads
        window.addEventListener('load', () => {
            console.log('Test page loaded');
            setTimeout(checkNLP, 100);
        });
    </script>
</body>
</html>